# ğŸ”¹ Use the official Ruby image
FROM ruby:3.3

# ğŸ”¹ Defines the working directory inside the container
WORKDIR /app

# ğŸ”¹ Copy Gemfile and Gemfile.lock to install dependencies first (optimizes Docker cache)
COPY Gemfile Gemfile.lock ./

# ğŸ”¹ Install project dependencies
RUN bundle install

# ğŸ”¹ Copy all the code from the microservice to the container
COPY . .

# ğŸ”¹ Exposes the port on which gRPC will run
EXPOSE 50051

# ğŸ”¹Command to run the server when the container starts
CMD ["ruby", "server.rb"]
